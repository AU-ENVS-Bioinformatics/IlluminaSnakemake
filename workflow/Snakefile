# Reading configuration file
configfile: "config/config.yaml"
DEFAULT_SOURCE_FILEPATH = config.get("DEFAULT_SOURCE_FILEPATH", "reads/")
DEFAULT_DEST_FILEPATH = config.get("DEFAULT_DEST_FILEPATH", "results/")
RENAMED_READS_FILEPATH = config.get("RENAMED_READS_FILEPATH", "renamed_raw_reads/")

# Searching for Illumina files
(name1, name2, number, lane, read, segment,) = glob_wildcards(DEFAULT_SOURCE_FILEPATH+ "{name1}-{name2}_{number}_{lane}_{read}_{segment}.fastq.gz")

rule all:
    input:
        expand(
            DEFAULT_DEST_FILEPATH + RENAMED_READS_FILEPATH + "{name2}_{read}.fastq.gz",
            zip, name2 = name2,read  = read
            )

rule renaming_files:
    input:
        expand(
            DEFAULT_SOURCE_FILEPATH + "{name1}-{name2}_{number}_{lane}_{read}_{segment}.fastq.gz",
            zip,
            name1 = name1,name2 = name2,
            number = number,lane = lane,
            read = read, segment = segment
            )
    output:
        expand(
            DEFAULT_DEST_FILEPATH + RENAMED_READS_FILEPATH + "{name2}_{read}.fastq.gz",
            zip,name2 = name2,read  = read
            ),
    script:
        "scripts/renaming_files.py"
